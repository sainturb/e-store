#apiVersion: v1
#kind: ConfigMap
#metadata:
#  name: postgres-secret
#  labels:
#    app: postgres
#data:
#  POSTGRES_DB: account
#  POSTGRES_USER: postgres
#  POSTGRES_PASSWORD: postgres
#---
#apiVersion: v1
#kind: PersistentVolume # Create PV
#metadata:
#  name: postgres-volume # Sets PV name
#  labels:
#    type: local # Sets PV's type
#    app: postgres
#spec:
#  storageClassName: manual
#  capacity:
#    storage: 2Gi # Sets PV's size
#  accessModes:
#    - ReadWriteMany
#  hostPath:
#    path: "/data/postgresql" # Sets PV's host path
#---
#apiVersion: v1
#kind: PersistentVolumeClaim # Create PVC
#metadata:
#  name: postgres-volume-claim # Sets PVC's name
#  labels:
#    app: postgres # Defines app to create PVC for
#spec:
#  storageClassName: manual
#  accessModes:
#    - ReadWriteMany
#  resources:
#    requests:
#      storage: 2Gi # Sets PVC's size
#---
#apiVersion: apps/v1
#kind: Deployment # Create a deployment
#metadata:
#  name: postgres # Set the name of the deployment
#spec:
#  replicas: 1 # Set 3 deployment replicas
#  selector:
#    matchLabels:
#      app: postgres
#  template:
#    metadata:
#      labels:
#        app: postgres
#    spec:
#      containers:
#        - name: postgres
#          image: postgres # Docker image
#          imagePullPolicy: "IfNotPresent"
#          ports:
#            - containerPort: 5432 # Exposing the container port 5432 for PostgreSQL client connections.
#          envFrom:
#            - configMapRef:
#                name: postgres-secret # Using the ConfigMap postgres-secret
#          volumeMounts:
#            - mountPath: /var/lib/postgresql/data
#              name: postgres-data
#      volumes:
#        - name: postgres-data
#          persistentVolumeClaim:
#            claimName: postgres-volume-claim
#---
#apiVersion: v1
#kind: Service # Create service
#metadata:
#  name: postgres # Sets the service name
#  labels:
#    app: postgres # Defines app to create service for
#spec:
#  type: NodePort # Sets the service type
#  ports:
#    - port: 5432 # Sets the port to run the postgres application
#  selector:
#    app: postgres